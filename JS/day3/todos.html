<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TODOS</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .todo_title {
            text-align: center;
            font-size: 30pt;
            font-weight: bold;
            color: green;
        
        }
        .todo_box {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .todo_list {
            list-style: none;
        }

    </style>
</head>
<body>
    <div class="todo_title">TODOS</div>

    <div class="todo_box">
        <div class="todo_box_input">
            <input type="text" class="todo_input" 
            placeholder="할 일을 추가해주세요" 
            style="height: 30pt; width: 300pt; color: gray;font-size: 15pt;">
            <button class="addBtn">+</button>
        </div>

        <ul class="todo_list">
            <!-- 완료된 일 -->
            <li class="todo_item">
                <div class="checkbox">v<div>
                <div calss="todo"></div>
                <button class="delBtn">x</button>
            </li>
            <!-- 미완료 -->
            <li calss="todo_item">
                <div class="checkbox"></div>
                <div class="todo"></div>
                <button class="delBtn">x</button>
            </li>
        </ul>
    </div>
    <script>
        // const taskManager {
        //     todo : []
        //     addTask: function (item) {
        //         this.todo.push(item)

        //     }

        // }
        const todoInputElem = document.querySelector('.todo_input')
        let todos = [];
        let id = 0;
        // 할 일의 구조
        // {id: number, isCompleted: boolean, content: string}

        // 특정 DOM요소에 이벤트 리스터를 등록할 때는 addEventListener를 사용
        // DOM객체.addEventListener(이벤트명, 실행할 함수명, 옵션)
        const init = function() {
            todoInputElem.addEventListener('keypress', function(event) {
                if (event.keyCode === 13) {
                    appendTodos(event.target.value);
                    todoInputElem.value = '';
                }
            })
        }
        init()
        // 기존 할 일 목록 불러오는 함수
        const getAlltodos = function() {
            return todos
        }
        // 추가한 목록으로 업데이트
        const setTodos = function(newTodos) {
            return todos = newTodos
        }
        // 목록 추가하는 함수
        const appendTodos = function(item) {
            const newId = id++
            const newTodos = getAlltodos().concat({id: newId, isCompleted: false, content: item})
            setTodos(newTodos)
            paintTodos()
        }
        const todoListElem = document.querySelector('.todo_list')

        const paintTodos = function() {
            todoListElem.innerHTML = null; // todoListElem 요소 안의 HTML 초기화
            const allTodos = getAlltodos()
            allTodos.forEach(function(todo) {
                const todoItemElem = document.createElement('li')
                todoItemElem.classList.add('todo_item')

                const checkboxElem = document.createElement('div')
                checkboxElem.classList.add('checkbox')

                const todoElem = document.createElement('div')
                todoElem.classList.add('todo')
                todoElem.innerText = todo.content

                const delBtnElem = document.createElement('button')
                delBtnElem.classList.add('delBtn')
                delBtnElem.innerHTML = 'x'

                todoItemElem.appendChild(checkboxElem)
                todoItemElem.appendChild(todoElem)
                todoItemElem.appendChild(delBtnElem)

                todoListElem.appendChild(todoItemElem)
            }
            )
        // const todoInput = document.querySelector('.todo_input')
        // const addBtn = document.querySelector('.addBtn')
        }
    </script>
</body>
</html>
